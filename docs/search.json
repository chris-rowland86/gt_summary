[
  {
    "objectID": "gt_summary_web.html",
    "href": "gt_summary_web.html",
    "title": "UTI Analysis",
    "section": "",
    "text": "Started with “Example 2” tabel from: https://www.danieldsjoberg.com/gtsummary/reference/tbl_strata.html\n\n\nCode\ntbl_strata_response_by_grade <-\n  trial %>%\n  select(grade, response) %>%\n  mutate(grade = paste(\"Grade\", grade)) %>%\n  tbl_strata2(\n    strata = grade,\n    .tbl_fun =\n      ~.x %>%\n      tbl_summary(\n        label = list(response = .y),\n        missing = \"no\",\n        statistic = response ~ \"{p}%\"\n      ) %>%\n      add_ci(pattern = \"{stat} ({ci})\") %>%\n     modify_header(stat_0 = \"**Rate (95% CI)**\") %>%\n     modify_footnote(stat_0 = NA),\n    .combine_with = \"tbl_stack\",\n    .combine_args = list(group_header = NULL),\n    .quiet = TRUE\n  ) %>%\n  modify_caption(\"**Response Rate by Grade**\") %>%\n  as_gt()\n\ntbl_strata_response_by_grade\n\n\n\n\n\n\n  Response Rate by Grade\n  \n  \n    \n      Characteristic\n      Rate (95% CI)1\n    \n  \n  \n    Grade I\n31% (21%, 44%)\n    Grade II\n30% (20%, 43%)\n    Grade III\n33% (22%, 46%)\n  \n  \n  \n    \n      1 CI = Confidence Interval\n    \n  \n\n\n\n\n\n\n\nThe response rates (%’s) and 95% CIs are the SAME so calculations did not change, BUT the grades are split across cols instead of rows strata definitely provides a cleaner presentation of the data\n\n\nCode\ntbl_summary_response_by_grade <-\n  trial %>%\n  select(grade, response) %>%\n  mutate(grade = paste(\"Grade\", grade)) %>%\n      tbl_summary(\n        by = grade,\n        missing = \"no\",\n        statistic = response ~ \"{p}%\"\n      ) %>%\n      add_ci(pattern = \"{stat} ({ci})\") %>%\n     modify_header(stat_0 = \"**Rate (95% CI)**\") %>%\n     modify_footnote(stat_0 = NA)  %>%\n  modify_caption(\"**Response Rate by Grade**\")\n\n\n! Column \"stat_0\" not found and was ignored.\n! Column \"stat_0\" not found and was ignored.\n\n\nCode\ntbl_summary_response_by_grade\n\n\n\n\n\n\n  Response Rate by Grade\n  \n  \n    \n      Characteristic\n      Grade I, N = 68 (95% CI)1,2\n      Grade II, N = 68 (95% CI)1,2\n      Grade III, N = 64 (95% CI)1,2\n    \n  \n  \n    Tumor Response\n31% (21%, 44%)\n30% (20%, 43%)\n33% (22%, 46%)\n  \n  \n  \n    \n      1 %\n    \n    \n      2 CI = Confidence Interval\n    \n  \n\n\n\n\n\n\n\nRemoving that argument returns a table where “Tumor Response” is repeated for all rows, and grade is NOT reported needed that argument to pass the strata levels to the row labels THIS is what tbl_strata2 accomplishes that tbl_strata cannot\n\n\nCode\ntbl_strata_response_by_grade_no_label <-\n  trial %>%\n  select(grade, response) %>%\n  mutate(grade = paste(\"Grade\", grade)) %>%\n  tbl_strata2(\n    strata = grade,\n    .tbl_fun =\n      ~.x %>%\n      tbl_summary(\n        missing = \"no\",\n        statistic = response ~ \"{p}%\"\n      ) %>%\n      add_ci(pattern = \"{stat} ({ci})\") %>%\n     modify_header(stat_0 = \"**Rate (95% CI)**\") %>%\n     modify_footnote(stat_0 = NA),\n    .combine_with = \"tbl_stack\",\n    .combine_args = list(group_header = NULL),\n    .quiet = TRUE\n  ) %>%\n  modify_caption(\"**Response Rate by Grade**\")\n\ntbl_strata_response_by_grade_no_label\n\n\n\n\n\n\n  Response Rate by Grade\n  \n  \n    \n      Characteristic\n      Rate (95% CI)1\n    \n  \n  \n    Tumor Response\n31% (21%, 44%)\n    Tumor Response\n30% (20%, 43%)\n    Tumor Response\n33% (22%, 46%)\n  \n  \n  \n    \n      1 CI = Confidence Interval\n    \n  \n\n\n\n\n\n\n\nBelow code returns a ERROR!!! Basically it canNOT find the “label” This is because tbl_strata2() passess BOTH the stratified data frame AND the strata level, which is the “y” in the label = list(response = .y)\n\n\nCode\ntbl_strata_response_by_grade_strata1 <-\n  trial %>%\n  select(grade, response) %>%\n  mutate(grade = paste(\"Grade\", grade)) %>%\n  tbl_strata(\n    strata = grade,\n    .tbl_fun =\n      ~.x %>%\n      tbl_summary(\n        label = list(response = .y),\n        missing = \"no\",\n        statistic = response ~ \"{p}%\"\n      ) %>%\n      add_ci(pattern = \"{stat} ({ci})\") %>%\n     modify_header(stat_0 = \"**Rate (95% CI)**\") %>%\n     modify_footnote(stat_0 = NA),\n    .combine_with = \"tbl_stack\",\n    .combine_args = list(group_header = NULL),\n    .quiet = TRUE\n  ) %>%\n  modify_caption(\"**Response Rate by Grade**\")\n\n\nError in `mutate()`:\n! Problem while computing `tbl = switch(...)`.\nCaused by error in `map()`:\nℹ In index: 1.\nCaused by error in `label %||% get_theme_element(\"tbl_summary-arg:label\")`:\n! the ... list contains fewer than 2 elements"
  }
]